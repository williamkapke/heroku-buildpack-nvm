#!/bin/bash


indent() {
  sed -u 's/^/       /'
}

echo "-----> Found a .versions file"

if [ ! -s $1/.versions ]; then
  echo ".versions empty. Skipping." | indent
  exit 0
fi

cd $1

if [ -s ".versions" ]; then
  curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.30.2/install.sh | bash

  while read version; do
    if [ -n "$version" ]; then # incase ensure_newline_at_eof_on_save is enabled
      echo Installing $version
      nvm install $version
    fi
  done < .versions
fi
